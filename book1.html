<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <link rel="icon" type="image/jpeg" href="logo.png">
  <link rel="apple-touch-icon" href="logo.png">
  <title>ุนุฑุถ ุงููุชุงุจ</title>
  <style>
/* ุฅุนุฏุงุฏุงุช ุนุงูุฉ */
body {
    font-family: Arial, sans-serif;   /* ููุน ุงูุฎุท Arial ููู ูุด ููุฌูุฏ ูุงุฎุฏ sans-serif */
    text-align: center;              /* ูุญุงุฐุงุฉ ุงููุต ูููุณุท */
    direction: rtl;                   /* ุงุชุฌุงู ุงููุต ูู ุงููููู ูููุณุงุฑ (ููุงุณุจ ููุนุฑุจูุฉ) */
    transition: background 0.3s, color 0.3s; /* ุงูุชูุงู ุณูุณ ุจูู ุงูุฃูุถุงุน */
}

.btn-container {
  display: grid;
  grid-template-columns: repeat(2, auto);
  gap: 6px;
  justify-content: center;
}

.btn-container button:nth-child(3) {
  grid-column: span 2; /* ูุฎูู ุงูุฒุฑ ุงูุซุงูุซ ูุงุฎุฏ ุนุฑุถ ุงูุนููุฏูู */
}

/* ===== ุงููุถุน ุงูุนุงุฏู (ูุงุชุญ) ===== */
body.light {
    background: #f7f7f7;              /* ุฎูููุฉ ุงูุตูุญุฉ ุฑูุงุฏู ูุงุชุญ */
    color: #222;                      /* ุงููุต ุฏุงูู */
}

body.light h1 {
    color: #333;                      /* ุนููุงู ุบุงูู */
}

body.light .details {
    color: #444;                      /* ูุต ุฑูุงุฏู ูุชูุณุท */
}

body.light .book-card {
    background: #fff;                 /* ูุงุฑุช ุฃุจูุถ */
    color: #000;                      /* ุงููุต ุฃุณูุฏ */
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);  /* ุธู ุฎููู */
}

body.light iframe {
    border: 1px solid #ccc;           /* ุฅุทุงุฑ ุฑูุงุฏู ูุงุชุญ */
}

/* ===== ุงููุถุน ุงูุฏุงูู ===== */
body.dark {
    background: #121212;              /* ุฎูููุฉ ุฏุงููุฉ ุฌุฏูุง */
    color: #f1f1f1;                   /* ุงููุตูุต ูุงุชุญุฉ */
}

body.dark h1 {
    color: #f5f5f5;                   /* ุงูุนููุงู ูุงุชุญ */
}

body.dark .details {
    color: #ddd;                      /* ุงููุต ุฑูุงุฏู ูุงุชุญ */
}

body.dark .book-card {
    background: #1e1e1e;              /* ุฎูููุฉ ุงููุงุฑุช ุฏุงููุฉ */
    color: #fff;                      /* ุงููุต ุฃุจูุถ */
    box-shadow: 0 4px 14px rgba(0,0,0,0.6);  /* ุธู ุฃููู */
}

body.dark iframe {
    border: 1px solid #555;           /* ุฅุทุงุฑ ุฑูุงุฏู ุบุงูู */
}

/* ===== ุงููุงุฑุช ===== */
.book-card {
    width: 250px;                     /* ุนุฑุถ ุงููุงุฑุช */
    margin: 20px auto;                /* ุชูุณูุท ุงููุงุฑุช */
    padding: 15px;                    /* ุญุดูุฉ ุฏุงุฎููุฉ */
    border-radius: 15px;              /* ุงูุญูุงู ุฏุงุฆุฑูุฉ */
    transition: transform 0.3s, box-shadow 0.3s; /* ุชุฃุซูุฑ ุณูุณ */
}

.book-card:hover {
    transform: translateY(-8px);      /* ุชุญุฑูู ููุฃุนูู ุนูุฏ ุงููุฑูุฑ */
}

/* ===== ุตูุฑุฉ ุงููุชุงุจ ===== */
.book-card img {
    width: 100%;                      /* ุจุนุฑุถ ุงููุงุฑุช */
    height: 300px;                    /* ุงุฑุชูุงุน ุงูุตูุฑุฉ */
    object-fit: cover;                /* ุชุบุทูุฉ ุจุฏูู ุชุดููู */
    border-radius: 12px;              /* ุญูุงู ููุญููุฉ */
}

/* ===== ุงูุฃุฒุฑุงุฑ ===== */
.btn, button {
    padding: 10px 20px;               /* ูุณุงุญุฉ ุฏุงุฎููุฉ */
    margin: 10px;                     /* ูุณุงุญุฉ ุฎุงุฑุฌูุฉ */
    font-size: 18px;                  /* ุญุฌู ุงููุต */
    cursor: pointer;                  /* ูุคุดุฑ ุงููุฏ */
    border: none;                     /* ุจุฏูู ุญุฏูุฏ */
    border-radius: 8px;               /* ุญูุงู ุฏุงุฆุฑูุฉ */
    background: #04b5b2;              /* ุฎูููุฉ ุชุฑููุงุฒ */
    color: #fff;                      /* ุงููุต ุฃุจูุถ */
    text-decoration: none;            /* ุจุฏูู ุฎุท ุณููู */
    display: inline-block;            /* ุนุฑุถ ูุชูู */
    transition: 0.3s;                 /* ุงูุชูุงู ุณูุณ */
}

.btn:hover, button:hover {
    background: #cd146a;              /* ููู ูุฑุฏู ุนูุฏ ุงููุฑูุฑ */
}

/* ===== ุนุงุฑุถ PDF ===== */
#pdfViewer {
    display: none;                    /* ูุฎูู ุงูุชุฑุงุถููุง */
    margin-top: 20px;                 /* ูุณุงูุฉ ูู ุงูุฃุนูู */
}

iframe {
    border-radius: 10px;              /* ุงูุญูุงู ููุญููุฉ */
}

/* ===== ุชูููู ุงููุชุงุจ ===== */
.rating-container {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 15px; /* ูุณุงูุฉ ุจูู ุงููุฌูู ูุงูุฒุฑ */
}

.rating span {
  font-size: 30px;
  cursor: pointer;
  color: #ccc;
  transition: color 0.3s;
}

.rating span.active {
  color: gold;
}

#unrateBtn {
  padding: 8px 16px;
  border: none;
  border-radius: 6px;
  background: #ff4d4d;
  color: white;
  cursor: pointer;
  font-size: 16px;
  transition: background 0.3s;
}

#unrateBtn:hover {
  background: #e60000;
}
  </style>
</head>
<body>
  <h1>ุญูุงุฉ ูุญูุฏ ุตูู ุงููู ุนููู ูุณูู</h1>

  <div class="details">
    ูุคูู : ุณูุฏ ูุจุงุฑู <br>
    ูุฆุฉ : ุณูุฑุฉ ุงููุจู ูุญูุฏ ุตูู ุงููู ุนููู ูุงูุณูุงู <br>
    ุงููุบุฉ : ุงูุนุฑุจูุฉ <br>
    ุงููุงุดุฑ : ุงูุดุฑูุฉ ุงูุฅุณูุงููุฉ <br>
    ุงูุตูุญุงุช : 72
  </div>

  <div class="book-card">
    <img src="img/book1.jpg" alt="book1">
  </div>

  <div id="bookStats">
    <p>๐๏ธ ุงููุดุงูุฏุงุช: <span id="views">0</span></p>
    <p>โญ ุงูุชูููู: <span id="avgRating">0</span> ูู <span id="totalVotes">0</span> ุชูููู</p>
  </div>

  <div class="rating-container">
  <div class="rating">
    <span data-value="1">โ</span>
    <span data-value="2">โ</span>
    <span data-value="3">โ</span>
    <span data-value="4">โ</span>
    <span data-value="5">โ</span>
  </div>
  <button id="unrateBtn" style="display:none;" onclick="unrate()">ุฅูุบุงุก ุงูุชูููู</button>
  </div>


  <div class="btn-container">
    <button onclick="goHome()">ุงูุฑุฌูุน ููุตูุญุฉ ุงูุฑุฆูุณูุฉ</button>
    <a class="btn" onclick="showPDF()">ุงูุฑุฃ ุงูุขู</a>
    <button id="toggleMode">๐ ุงููุถุน ุงูุฏุงูู</button>
  </div>

  <div id="pdfViewer">
    <iframe src="file/Life.pdf" width="80%" height="600px"></iframe>
    <br>
    <button onclick="goHome()">ุงูุฑุฌูุน ููุตูุญุฉ ุงูุฑุฆูุณูุฉ</button>
  </div>

  <script>
const book_id = "book1"; // ๐ ูู ูุชุงุจ ููู ูุนุฑู ุฎุงุต ุจูู

// ====== ุนูุฏ ุชุญููู ุงูุตูุญุฉ ======
document.addEventListener("DOMContentLoaded", () => {
  // ุฌูุจ ุงูุจูุงูุงุช ุงูุญุงููุฉ ูู ุงูุณูุฑูุฑ
  fetch("books.php?action=get&book_id=" + book_id)
    .then(res => res.json())
    .then(data => {
      document.getElementById("views").innerText = data.views;
      document.getElementById("avgRating").innerText = data.avg.toFixed(1);
      document.getElementById("totalVotes").innerText = data.votes;
    });

  // ุชุณุฌูู ูุดุงูุฏุฉ ูุงุญุฏุฉ ููุท ููู ูุณุชุฎุฏู
  if (!localStorage.getItem("viewed_" + book_id)) {
    fetch("books.php?action=view&book_id=" + book_id);
    localStorage.setItem("viewed_" + book_id, "true");
  }

  // ูู ูุงู ุงููุณุชุฎุฏู ูููู ูุจู ูุฏู โ ูุฑุฌุน ูููู ุงููุฌูู ููุธูุฑ ุฒุฑ ุงูุฅูุบุงุก
  let prevRating = localStorage.getItem("rated_" + book_id);
  if (prevRating) {
    highlightStars(prevRating);
    document.getElementById("unrateBtn").style.display = "inline-block";
  }
});

// ====== ุงูุชุนุงูู ูุน ุงูุชูููู ======
document.querySelectorAll(".rating span").forEach(star => {
  star.addEventListener("click", () => {
    let value = star.getAttribute("data-value");

    // ูู ุงููุณุชุฎุฏู ููู ูุจู ูุฏู โ ููุน ุงูุชูููู ูุฑุฉ ุชุงููุฉ
    if (localStorage.getItem("rated_" + book_id)) {
      alert("ููุฏ ููุช ุจุชูููู ูุฐุง ุงููุชุงุจ ูู ูุจู!");
      return;
    }

    fetch("books.php?action=rate&book_id=" + book_id + "&value=" + value)
      .then(res => res.json())
      .then(data => {
        document.getElementById("views").innerText = data.views;
        document.getElementById("avgRating").innerText = data.avg.toFixed(1);
        document.getElementById("totalVotes").innerText = data.votes;
        highlightStars(value);
        localStorage.setItem("rated_" + book_id, value);
        document.getElementById("unrateBtn").style.display = "inline-block";
      });
  });
});

// ====== ุฒุฑ ุฅูุบุงุก ุงูุชูููู ======
document.getElementById("unrateBtn").addEventListener("click", () => {
  let prevRating = localStorage.getItem("rated_" + book_id);
  if (!prevRating) return;

  fetch("books.php?action=unrate&book_id=" + book_id + "&value=" + prevRating)
    .then(res => res.json())
    .then(data => {
      document.getElementById("views").innerText = data.views;
      document.getElementById("avgRating").innerText = data.avg.toFixed(1);
      document.getElementById("totalVotes").innerText = data.votes;
      resetStars();
      localStorage.removeItem("rated_" + book_id);
      document.getElementById("unrateBtn").style.display = "none";
    });
});

// ====== ุฏูุงู ูุณุงุนุฏุฉ ======
function highlightStars(value) {
  document.querySelectorAll(".rating span").forEach(star => {
    if (parseInt(star.getAttribute("data-value")) <= value) {
      star.classList.add("active");
    } else {
      star.classList.remove("active");
    }
  });
}

function resetStars() {
  document.querySelectorAll(".rating span").forEach(star => {
    star.classList.remove("active");
  });
}

function showPDF() {
  document.getElementById("pdfViewer").style.display = "block";
  window.scrollTo(0, document.getElementById("pdfViewer").offsetTop);
}

function goHome() {
  window.location.href = "index.html"; 
}
  </script>
  <script src="main.js"></script>
</body>
</html>