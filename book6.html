<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <link rel="icon" type="image/jpeg" href="logo.png">
  <link rel="apple-touch-icon" href="logo.png">
  <title>Ø¹Ø±Ø¶ Ø§Ù„ÙƒØªØ§Ø¨</title>
  <style>
/* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø© */
body {
    font-family: Arial, sans-serif;   /* Ù†ÙˆØ¹ Ø§Ù„Ø®Ø· Arial ÙˆÙ„Ùˆ Ù…Ø´ Ù…ÙˆØ¬ÙˆØ¯ ÙŠØ§Ø®Ø¯ sans-serif */
    text-align: center;              /* Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ù†Øµ Ù„Ù„ÙˆØ³Ø· */
    direction: rtl;                   /* Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù†Øµ Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† Ù„Ù„ÙŠØ³Ø§Ø± (Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø¹Ø±Ø¨ÙŠØ©) */
    transition: background 0.3s, color 0.3s; /* Ø§Ù†ØªÙ‚Ø§Ù„ Ø³Ù„Ø³ Ø¨ÙŠÙ† Ø§Ù„Ø£ÙˆØ¶Ø§Ø¹ */
}

.btn-container {
  display: grid;
  grid-template-columns: repeat(2, auto);
  gap: 6px;
  justify-content: center;
}

.btn-container button:nth-child(3) {
  grid-column: span 2; /* ÙŠØ®Ù„ÙŠ Ø§Ù„Ø²Ø± Ø§Ù„Ø«Ø§Ù„Ø« ÙŠØ§Ø®Ø¯ Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠÙ† */
}

/* ===== Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ (ÙØ§ØªØ­) ===== */
body.light {
    background: #f7f7f7;              /* Ø®Ù„ÙÙŠØ© Ø§Ù„ØµÙØ­Ø© Ø±Ù…Ø§Ø¯ÙŠ ÙØ§ØªØ­ */
    color: #222;                      /* Ø§Ù„Ù†Øµ Ø¯Ø§ÙƒÙ† */
}

body.light h1 {
    color: #333;                      /* Ø¹Ù†ÙˆØ§Ù† ØºØ§Ù…Ù‚ */
}

body.light .details {
    color: #444;                      /* Ù†Øµ Ø±Ù…Ø§Ø¯ÙŠ Ù…ØªÙˆØ³Ø· */
}

body.light .book-card {
    background: #fff;                 /* ÙƒØ§Ø±Øª Ø£Ø¨ÙŠØ¶ */
    color: #000;                      /* Ø§Ù„Ù†Øµ Ø£Ø³ÙˆØ¯ */
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);  /* Ø¸Ù„ Ø®ÙÙŠÙ */
}

body.light iframe {
    border: 1px solid #ccc;           /* Ø¥Ø·Ø§Ø± Ø±Ù…Ø§Ø¯ÙŠ ÙØ§ØªØ­ */
}

/* ===== Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ† ===== */
body.dark {
    background: #121212;              /* Ø®Ù„ÙÙŠØ© Ø¯Ø§ÙƒÙ†Ø© Ø¬Ø¯Ù‹Ø§ */
    color: #f1f1f1;                   /* Ø§Ù„Ù†ØµÙˆØµ ÙØ§ØªØ­Ø© */
}

body.dark h1 {
    color: #f5f5f5;                   /* Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙØ§ØªØ­ */
}

body.dark .details {
    color: #ddd;                      /* Ø§Ù„Ù†Øµ Ø±Ù…Ø§Ø¯ÙŠ ÙØ§ØªØ­ */
}

body.dark .book-card {
    background: #1e1e1e;              /* Ø®Ù„ÙÙŠØ© Ø§Ù„ÙƒØ§Ø±Øª Ø¯Ø§ÙƒÙ†Ø© */
    color: #fff;                      /* Ø§Ù„Ù†Øµ Ø£Ø¨ÙŠØ¶ */
    box-shadow: 0 4px 14px rgba(0,0,0,0.6);  /* Ø¸Ù„ Ø£Ù‚ÙˆÙ‰ */
}

body.dark iframe {
    border: 1px solid #555;           /* Ø¥Ø·Ø§Ø± Ø±Ù…Ø§Ø¯ÙŠ ØºØ§Ù…Ù‚ */
}

/* ===== Ø§Ù„ÙƒØ§Ø±Øª ===== */
.book-card {
    width: 250px;                     /* Ø¹Ø±Ø¶ Ø§Ù„ÙƒØ§Ø±Øª */
    margin: 20px auto;                /* ØªÙˆØ³ÙŠØ· Ø§Ù„ÙƒØ§Ø±Øª */
    padding: 15px;                    /* Ø­Ø´ÙˆØ© Ø¯Ø§Ø®Ù„ÙŠØ© */
    border-radius: 15px;              /* Ø§Ù„Ø­ÙˆØ§Ù Ø¯Ø§Ø¦Ø±ÙŠØ© */
    transition: transform 0.3s, box-shadow 0.3s; /* ØªØ£Ø«ÙŠØ± Ø³Ù„Ø³ */
}

.book-card:hover {
    transform: translateY(-8px);      /* ØªØ­Ø±ÙŠÙƒ Ù„Ù„Ø£Ø¹Ù„Ù‰ Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø±ÙˆØ± */
}

/* ===== ØµÙˆØ±Ø© Ø§Ù„ÙƒØªØ§Ø¨ ===== */
.book-card img {
    width: 100%;                      /* Ø¨Ø¹Ø±Ø¶ Ø§Ù„ÙƒØ§Ø±Øª */
    height: 300px;                    /* Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„ØµÙˆØ±Ø© */
    object-fit: cover;                /* ØªØºØ·ÙŠØ© Ø¨Ø¯ÙˆÙ† ØªØ´ÙˆÙŠÙ‡ */
    border-radius: 12px;              /* Ø­ÙˆØ§Ù Ù…Ù†Ø­Ù†ÙŠØ© */
}

/* ===== Ø§Ù„Ø£Ø²Ø±Ø§Ø± ===== */
.btn, button {
    padding: 10px 20px;               /* Ù…Ø³Ø§Ø­Ø© Ø¯Ø§Ø®Ù„ÙŠØ© */
    margin: 10px;                     /* Ù…Ø³Ø§Ø­Ø© Ø®Ø§Ø±Ø¬ÙŠØ© */
    font-size: 18px;                  /* Ø­Ø¬Ù… Ø§Ù„Ù†Øµ */
    cursor: pointer;                  /* Ù…Ø¤Ø´Ø± Ø§Ù„ÙŠØ¯ */
    border: none;                     /* Ø¨Ø¯ÙˆÙ† Ø­Ø¯ÙˆØ¯ */
    border-radius: 8px;               /* Ø­ÙˆØ§Ù Ø¯Ø§Ø¦Ø±ÙŠØ© */
    background: #04b5b2;              /* Ø®Ù„ÙÙŠØ© ØªØ±ÙƒÙˆØ§Ø² */
    color: #fff;                      /* Ø§Ù„Ù†Øµ Ø£Ø¨ÙŠØ¶ */
    text-decoration: none;            /* Ø¨Ø¯ÙˆÙ† Ø®Ø· Ø³ÙÙ„ÙŠ */
    display: inline-block;            /* Ø¹Ø±Ø¶ ÙƒØªÙ„ÙŠ */
    transition: 0.3s;                 /* Ø§Ù†ØªÙ‚Ø§Ù„ Ø³Ù„Ø³ */
}

.btn:hover, button:hover {
    background: #cd146a;              /* Ù„ÙˆÙ† ÙˆØ±Ø¯ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø±ÙˆØ± */
}

/* ===== Ø¹Ø§Ø±Ø¶ PDF ===== */
#pdfViewer {
    display: none;                    /* Ù…Ø®ÙÙŠ Ø§ÙØªØ±Ø§Ø¶ÙŠÙ‹Ø§ */
    margin-top: 20px;                 /* Ù…Ø³Ø§ÙØ© Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ */
}

iframe {
    border-radius: 10px;              /* Ø§Ù„Ø­ÙˆØ§Ù Ù…Ù†Ø­Ù†ÙŠØ© */
}

/* ===== ØªÙ‚ÙŠÙŠÙ… Ø§Ù„ÙƒØªØ§Ø¨ ===== */
.rating-container {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 15px; /* Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ù†Ø¬ÙˆÙ… ÙˆØ§Ù„Ø²Ø± */
}

.rating span {
  font-size: 30px;
  cursor: pointer;
  color: #ccc;
  transition: color 0.3s;
}

.rating span.active {
  color: gold;
}

#unrateBtn {
  padding: 8px 16px;
  border: none;
  border-radius: 6px;
  background: #ff4d4d;
  color: white;
  cursor: pointer;
  font-size: 16px;
  transition: background 0.3s;
}

#unrateBtn:hover {
  background: #e60000;
}
  </style>
</head>
<body>
  <h1>ÙƒØªØ§Ø¨ Ø§Ù„Ø«Ù‚Ø§ÙØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø¹Ù‚Ø§Ø¯</h1>

  <div class="details">
    Ù…Ø¤Ù„Ù : Ø¹Ø¨Ø§Ø³ Ø§Ù„Ø¹Ù‚Ø§Ø¯ <br>
    Ù‚Ø³Ù… : Ø§Ù„Ø«Ù‚Ø§ÙØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© <br>
    Ø§Ù„Ù„ØºØ© : Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© <br>
    Ø§Ù„ØµÙØ­Ø§Øª : 78
  </div>

  <div class="book-card">
    <img src="img/book6.jpg" alt="book3">
  </div>

  <div id="bookStats">
    <p>ğŸ‘ï¸ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª: <span id="views">0</span></p>
    <p>â­ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: <span id="avgRating">0</span> Ù…Ù† <span id="totalVotes">0</span> ØªÙ‚ÙŠÙŠÙ…</p>
  </div>

  <div class="rating-container">
  <div class="rating">
    <span data-value="1">â˜…</span>
    <span data-value="2">â˜…</span>
    <span data-value="3">â˜…</span>
    <span data-value="4">â˜…</span>
    <span data-value="5">â˜…</span>
  </div>
  <button id="unrateBtn" style="display:none;" onclick="unrate()">Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</button>
  </div>

  <div class="btn-container">
    <button onclick="goHome()">Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    <a class="btn" onclick="showPDF()">Ø§Ù‚Ø±Ø£ Ø§Ù„Ø¢Ù†</a>
    <button id="toggleMode">ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†</button>
  </div>

  <div id="pdfViewer">
    <iframe src="file/Arab culture.pdf" width="80%" height="600px"></iframe>
    <br>
    <button onclick="goHome()">Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
  </div>

  <script>
const book_id = "book6"; // ğŸ‘ˆ ÙƒÙ„ ÙƒØªØ§Ø¨ Ù„ÙŠÙ‡ Ù…Ø¹Ø±Ù Ø®Ø§Øµ Ø¨ÙŠÙ‡

// ====== Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© ======
document.addEventListener("DOMContentLoaded", () => {
  // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±
  fetch("books.php?action=get&book_id=" + book_id)
    .then(res => res.json())
    .then(data => {
      document.getElementById("views").innerText = data.views;
      document.getElementById("avgRating").innerText = data.avg.toFixed(1);
      document.getElementById("totalVotes").innerText = data.votes;
    });

  // ØªØ³Ø¬ÙŠÙ„ Ù…Ø´Ø§Ù‡Ø¯Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø· Ù„ÙƒÙ„ Ù…Ø³ØªØ®Ø¯Ù…
  if (!localStorage.getItem("viewed_" + book_id)) {
    fetch("books.php?action=view&book_id=" + book_id);
    localStorage.setItem("viewed_" + book_id, "true");
  }

  // Ù„Ùˆ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù‚ÙŠÙ‘Ù… Ù‚Ø¨Ù„ ÙƒØ¯Ù‡ â†’ Ù†Ø±Ø¬Ø¹ Ù†Ù„ÙˆÙ† Ø§Ù„Ù†Ø¬ÙˆÙ… ÙˆÙ†Ø¸Ù‡Ø± Ø²Ø± Ø§Ù„Ø¥Ù„ØºØ§Ø¡
  let prevRating = localStorage.getItem("rated_" + book_id);
  if (prevRating) {
    highlightStars(prevRating);
    document.getElementById("unrateBtn").style.display = "inline-block";
  }
});

// ====== Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ======
document.querySelectorAll(".rating span").forEach(star => {
  star.addEventListener("click", () => {
    let value = star.getAttribute("data-value");

    // Ù„Ùˆ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù‚ÙŠÙ… Ù‚Ø¨Ù„ ÙƒØ¯Ù‡ â†’ Ù…Ù†Ø¹ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ù…Ø±Ø© ØªØ§Ù†ÙŠØ©
    if (localStorage.getItem("rated_" + book_id)) {
      alert("Ù„Ù‚Ø¯ Ù‚Ù…Øª Ø¨ØªÙ‚ÙŠÙŠÙ… Ù‡Ø°Ø§ Ø§Ù„ÙƒØªØ§Ø¨ Ù…Ù† Ù‚Ø¨Ù„!");
      return;
    }

    fetch("books.php?action=rate&book_id=" + book_id + "&value=" + value)
      .then(res => res.json())
      .then(data => {
        document.getElementById("views").innerText = data.views;
        document.getElementById("avgRating").innerText = data.avg.toFixed(1);
        document.getElementById("totalVotes").innerText = data.votes;
        highlightStars(value);
        localStorage.setItem("rated_" + book_id, value);
        document.getElementById("unrateBtn").style.display = "inline-block";
      });
  });
});

// ====== Ø²Ø± Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ======
document.getElementById("unrateBtn").addEventListener("click", () => {
  let prevRating = localStorage.getItem("rated_" + book_id);
  if (!prevRating) return;

  fetch("books.php?action=unrate&book_id=" + book_id + "&value=" + prevRating)
    .then(res => res.json())
    .then(data => {
      document.getElementById("views").innerText = data.views;
      document.getElementById("avgRating").innerText = data.avg.toFixed(1);
      document.getElementById("totalVotes").innerText = data.votes;
      resetStars();
      localStorage.removeItem("rated_" + book_id);
      document.getElementById("unrateBtn").style.display = "none";
    });
});

// ====== Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© ======
function highlightStars(value) {
  document.querySelectorAll(".rating span").forEach(star => {
    if (parseInt(star.getAttribute("data-value")) <= value) {
      star.classList.add("active");
    } else {
      star.classList.remove("active");
    }
  });
}

function resetStars() {
  document.querySelectorAll(".rating span").forEach(star => {
    star.classList.remove("active");
  });
}

function showPDF() {
  document.getElementById("pdfViewer").style.display = "block";
  window.scrollTo(0, document.getElementById("pdfViewer").offsetTop);
}

function goHome() {
  window.location.href = "index.html"; 
}
  </script>
  <script src="main.js"></script>
</body>
</html>